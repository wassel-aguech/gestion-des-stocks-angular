<!--sidebar-->
<c-sidebar
  #sidebar1="cSidebar"
  class="d-print-none sidebar sidebar-fixed border-end"

  id="sidebar1"
  visible
  style="background-color: #000168;"
>
<!-- colorScheme="light" -->
  <c-sidebar-header class="border-bottom">
    <c-sidebar-brand [routerLink]="[]">
      <img class="ms-5" src="../assets/images/sofii.png" width="100px" alt="">

    </c-sidebar-brand>
  </c-sidebar-header>


   <!-- <div class="dropdown">
    <button *ngIf="userRole === 'admin'" class="btn btn-light position-relative dropdown-toggle" data-bs-toggle="dropdown">
      <i class="bi bi-bell" style="font-size: 1.5rem;"></i>
      <span *ngIf="notificationCount > 0"
            class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
        {{ notificationCount }}
        <span class="visually-hidden">notifications non lues</span>
      </span>
    </button>

    <ul class="dropdown-menu dropdown-menu-end" style="max-height: 300px; overflow-y: auto; width: 320px;">
      <li *ngFor="let notif of notifications">
        <div class="dropdown-item d-flex justify-content-between align-items-start">
          <div>
            <div class="d-flex align-items-center">
              <i class="bi bi-bell-fill text-primary me-2"></i>
              <span [ngClass]="{ 'fw-bold': !notif.is_read }">{{ notif.message }}</span>
            </div>
            <small class="text-muted ms-4">{{ notif.created_at | date:'short' }}</small>
          </div>

          <button *ngIf="!notif.is_read"
          class="btn btn-outline-success ms-2"
          (click)="markAsRead(notif)"
          title="Marquer comme lue">
           <i class="fas fa-check-circle" style="font-size: 1.3rem;"></i>
           </button>
        </div>
      </li>

      <li *ngIf="notifications.length === 0">
        <span class="dropdown-item text-muted">Aucune notification</span>
      </li>
    </ul>

  </div> -->


  










  <ng-scrollbar pointerEventsMethod="scrollbar" visibility="hover">
    <c-sidebar-nav  [navItems]="filteredNavItems" dropdownMode="close" compact />
  </ng-scrollbar>

  @if (!sidebar1.narrow) {
    <c-sidebar-footer cSidebarToggle="sidebar1" class="border-top d-none d-lg-flex" toggle="unfoldable" style="cursor: pointer;">
      <button cSidebarToggler aria-label="Toggle sidebar fold"></button>
    </c-sidebar-footer>
  }
</c-sidebar>

<!--main-->
<div class="wrapper d-flex flex-column min-vh-100">
  <!--app-header-->
  <app-default-header
    [cShadowOnScroll]="'sm'"
    class="mb-4 d-print-none header header-sticky p-0 shadow-sm"
    position="sticky"
    sidebarId="sidebar1"
  />
  <!--app-body-->
  <div class="body flex-grow-1">
    <c-container breakpoint="lg" class="h-auto px-4">
      <router-outlet />
    </c-container>
  </div>
  <!--app footer-->
  <app-default-footer />
</div>
